<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89416231-1', 'auto');
  ga('send', 'pageview');

</script>
    <link rel="stylesheet" type="text/css" href="tutorial.css">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Monitoring with Nagios</title>
  </head>
  <body>
    <!-- Header -->
    <h1> "The Sometimes SysAdmin Blog" </h1>
    <!-- Navigation Bar --> <span style="text-align: center;">
      <div class="navBar"> | <a href="../index.html"> Home</a> | <a
          href="../about.html"> About me</a> | <a
          href="../programs.html"> Programs</a> | <a
          href="../tutorials.html"> Tutorials</a> | <a
          href="../blog.html"> Blog Posts</a> | </div>
    </span> <br>
    <div align="center">
      <h2><u>System Monitoring<br>
        </u></h2>
      <h3>Setting up a Nagios Server<br>
      </h3>
      <div align="left"><br>
        We are going to set up a CentOS 7 server for Nagios.&nbsp;
        Nagios is tough to configure correctly, but it's the gold
        standard when it comes to open source monitoring software.&nbsp;
        Nagios is so advanced that when set up correctly, it can alert a
        system administrator to a problem before the problem even
        occurs!&nbsp; <br>
        <br>
        So in a new CentOS 7 server, update it, then download the
        following packages: httpd, unzip, php, php-cli, gcc, glibc,
        glibc-common, gd, gd-devel, net-snmp-utils, and net-snmp.&nbsp;
        Start httpd with systemctl.<br>
        <br>
        Next add a user called "nagios" and the group "nagcmd".&nbsp;
        Add nagios and apache users to the group nagcmd with <br>
        &nbsp;&nbsp;&nbsp; <code>useradd nagios</code><br>
        &nbsp;&nbsp;&nbsp; <code>groupadd nagcmd<br>
          &nbsp; usermod -a -G nagcmd nagios<br>
          &nbsp; usermod -a -G nagcmd apache<br>
          <br>
        </code>Now were going to install Nagios from SourceForge.&nbsp;
        Change into the /opt directory<br>
        &nbsp;&nbsp;&nbsp; <code>wget
https://sourceforge.net/projects/nagios/files/nagios-4.x/nagios-4.2.4/nagios-4.2.4.tar.gz<br>
          &nbsp; wget
          https://nagios-plugins.org/download/nagios-plugins-2.1.4.tar.gz<br>
          <br>
        </code> Unzip nagios-4.2.4 and enter the directory.&nbsp; Then
        run the following commands<br>
        &nbsp;&nbsp;&nbsp; <code>./configure
          --with-command-group=nagcmd<br>
          &nbsp; make all<br>
          &nbsp; make install<br>
          &nbsp; make install-init<br>
          &nbsp; make install-config<br>
          &nbsp; make install-commandmode<br>
          &nbsp; make install-webconf<br>
          &nbsp; htpasswd -c /usr/local/nagios/etc/htpasswd.users
          nagiosadmin<br>
          <br>
        </code>Install the plug-ins by navigating to that directory and
        entering<br>
        &nbsp;&nbsp;&nbsp; <code>./configure --with-nagios-user=nagios
          --with-nagios-group=nagios<br>
          &nbsp; make<br>
          &nbsp; make install<br>
        </code><code><br>
        </code>Now change settings for SELinux in /etc/selinux/config to
        permissive, and add firewall rules<br>
        &nbsp;&nbsp;&nbsp; <code>firewall-cmd --permanent
          --add-service=http<br>
          <br>
        </code>Now you can access the server by going to a web browser
        and entering nagios.harvey.virtnet/nagios and entering your
        credentials.<br>
        <br>
      </div>
    </div>
    <!-- Donate Button -->
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post"
      target="_top" data-ajax="false"> <input name="cmd"
        value="_s-xclick" type="hidden"> <input name="hosted_button_id"
        value="C6H37RANCUX42" type="hidden"> <input
        src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif"
        name="submit" alt="PayPal - The safer, easier way to pay
        online!" border="0" type="image"> <img alt=""
        src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif"
        border="0" height="1" width="1"> </form>
    <br>
    <!-- Footer -->
    <footer> Page created by Jamie Harvey </footer>
  </body>
</html>
